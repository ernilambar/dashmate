### Environment Variables
### IMPORTANT: Create a .env file or set these variables in your local environment
### DO NOT commit actual values to version control
@base_url = {{$dotenv DASHMATE_BASE_URL}}
@nonce = {{$dotenv WP_NONCE}}

### Alternative: Use environment variables directly
### @base_url = {{$processEnv DASHMATE_BASE_URL}}
### @nonce = {{$processEnv WP_NONCE}}

### Widgets Controller API Tests
### Base URL: /wp-json/dashmate/v1/widgets

### 1. Get all available widgets
GET {{base_url}}/wp-json/dashmate/v1/widgets
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### 2. Get widget data by ID
GET {{base_url}}/wp-json/dashmate/v1/widgets/sample-html/data
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### 3. Get widget content by widget ID
GET {{base_url}}/wp-json/dashmate/v1/widgets/content/sample-html
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### 4. Get widget content with settings (POST)
POST {{base_url}}/wp-json/dashmate/v1/widgets/content/sample-html
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Custom HTML Widget",
    "content": "<h2>Hello World!</h2><p>This is a custom HTML widget.</p>",
    "show_title": true
  }
}

###

### 5. Save widget settings
POST {{base_url}}/wp-json/dashmate/v1/widgets/sample-html/settings
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Updated Widget Title",
    "content": "<h3>Updated Content</h3><p>This content has been updated.</p>",
    "show_title": false,
    "custom_class": "my-custom-widget"
  }
}

###

### 6. Test with different widget types
### Sample Links Widget
GET {{base_url}}/wp-json/dashmate/v1/widgets/sample-links/data
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### Sample Progress Circles Widget
GET {{base_url}}/wp-json/dashmate/v1/widgets/sample-progress-circles/data
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### Sample Tabular Widget
GET {{base_url}}/wp-json/dashmate/v1/widgets/sample-tabular/data
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### 7. Test widget content with settings for different widget types
### Links Widget with settings
POST {{base_url}}/wp-json/dashmate/v1/widgets/content/sample-links
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Quick Links",
    "links": [
      {
        "text": "WordPress Admin",
        "url": "/wp-admin",
        "icon": "admin"
      },
      {
        "text": "Settings",
        "url": "/wp-admin/options-general.php",
        "icon": "settings"
      }
    ],
    "show_title": true
  }
}

###

### Progress Circles Widget with settings
POST {{base_url}}/wp-json/dashmate/v1/widgets/content/sample-progress-circles
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Progress Overview",
    "circles": [
      {
        "label": "Tasks",
        "value": 75,
        "color": "#0073aa"
      },
      {
        "label": "Projects",
        "value": 45,
        "color": "#46b450"
      }
    ],
    "show_title": true
  }
}

###

### Tabular Widget with settings
POST {{base_url}}/wp-json/dashmate/v1/widgets/content/sample-tabular
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Recent Posts",
    "headers": ["Title", "Author", "Date", "Status"],
    "rows": [
      ["Sample Post 1", "Admin", "2024-01-15", "Published"],
      ["Sample Post 2", "Editor", "2024-01-14", "Draft"]
    ],
    "show_title": true
  }
}

###

### 8. Error handling tests
### Test with invalid widget ID
GET {{base_url}}/wp-json/dashmate/v1/widgets/invalid-widget-id/data
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### Test with invalid widget ID in content endpoint
GET {{base_url}}/wp-json/dashmate/v1/widgets/content/invalid-widget-id
Content-Type: application/json
X-WP-Nonce: {{nonce}}

###

### Test save settings with invalid widget ID
POST {{base_url}}/wp-json/dashmate/v1/widgets/invalid-widget-id/settings
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {
    "title": "Test"
  }
}

###

### 9. Test without required parameters
### Test save settings without settings parameter
POST {{base_url}}/wp-json/dashmate/v1/widgets/sample-html/settings
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
}

###

### 10. Test with empty settings
POST {{base_url}}/wp-json/dashmate/v1/widgets/sample-html/settings
Content-Type: application/json
X-WP-Nonce: {{nonce}}

{
  "settings": {}
}

###
